# ðŸ§­ ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð½Ð° Ð·Ð°Ð´Ð°Ñ‡Ð°Ñ‚Ð°  
### MetroSim: Ð¡Ð¸Ð¼ÑƒÐ»Ð°Ñ‚Ð¾Ñ€ Ð½Ð° Ñ‚Ñ€Ð°Ð½ÑÐ¿Ð¾Ñ€Ñ‚Ð½Ð° Ð¼Ñ€ÐµÐ¶Ð° Ñ Ð¿Ð°Ñ€Ð°Ð»ÐµÐ»Ð½Ð° Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° (Swing, Java 17)

---

## ðŸŽ¯ ÐžÐ±Ñ‰ Ð¿Ñ€ÐµÐ³Ð»ÐµÐ´

**MetroSim** Ðµ Ð´ÐµÑÐºÑ‚Ð¾Ð¿ ÑÐ¸Ð¼ÑƒÐ»Ð°Ñ‚Ð¾Ñ€ Ð½Ð° Ñ‚Ñ€Ð°Ð½ÑÐ¿Ð¾Ñ€Ñ‚Ð½Ð° Ð¼Ñ€ÐµÐ¶Ð°, ÐºÐ¾Ð¹Ñ‚Ð¾ Ð²Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð¸Ñ€Ð° Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸ÐµÑ‚Ð¾ Ð½Ð° Ð¿Ñ€ÐµÐ²Ð¾Ð·Ð½Ð¸ ÑÑ€ÐµÐ´ÑÑ‚Ð²Ð° Ð² Ð¾Ð¿Ñ€Ð¾ÑÑ‚ÐµÐ½Ð° Ð¼ÐµÑ‚Ñ€Ð¾/Ð°Ð²Ñ‚Ð¾Ð±ÑƒÑÐ½Ð° ÑÐ¸ÑÑ‚ÐµÐ¼Ð°.  
ÐŸÑ€Ð¾ÐµÐºÑ‚ÑŠÑ‚ Ð¿Ð¾ÐºÐ°Ð·Ð²Ð° ÐºÐ°Ðº Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ð¾ **ÑˆÐ°Ð±Ð»Ð¾Ð½Ð¸ Ð·Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¸Ñ€Ð°Ð½Ðµ (Design Patterns)** Ð¼Ð¾Ð³Ð°Ñ‚ Ð´Ð° Ð±ÑŠÐ´Ð°Ñ‚ ÐºÐ¾Ð¼Ð±Ð¸Ð½Ð¸Ñ€Ð°Ð½Ð¸ Ð² **Ð¿Ð°Ñ€Ð°Ð»ÐµÐ»Ð½Ð¾, ÑÑŠÐ±Ð¸Ñ‚Ð¸Ð¹Ð½Ð¾ Ð¸ Ñ€Ð°Ð·ÑˆÐ¸Ñ€ÑÐµÐ¼Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ**, Ð¸Ð·Ð³Ñ€Ð°Ð´ÐµÐ½Ð¾ ÑÑŠÑ **Java Swing**.

Ð¦ÐµÐ»Ñ‚Ð° Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸ÐµÑ‚Ð¾ Ð´Ð° ÑÐ»ÑƒÐ¶Ð¸ ÐºÐ°Ñ‚Ð¾ **Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð½Ð° Ð¸Ð¼Ð¿Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ** Ð·Ð° ÑƒÐ½Ð¸Ð²ÐµÑ€ÑÐ¸Ñ‚ÐµÑ‚ÑÐºÐ¸ ÐºÑƒÑ€ÑÐ¾Ð²Ðµ Ð¿Ð¾:

- **Ð¨Ð°Ð±Ð»Ð¾Ð½Ð¸ Ð·Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¸Ñ€Ð°Ð½Ðµ (Design Patterns)** â€“ Ð´ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð¸Ñ€Ð°Ð¹ÐºÐ¸ ÐºÐ°Ðº Ñ€Ð°Ð·Ð»Ð¸Ñ‡Ð½Ð¸ ÑˆÐ°Ð±Ð»Ð¾Ð½Ð¸ ÑÐµ ÐºÐ¾Ð¼Ð±Ð¸Ð½Ð¸Ñ€Ð°Ñ‚ Ð² Ð¾Ð±Ñ‰Ð° Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°.  
- **ÐŸÐ°Ñ€Ð°Ð»ÐµÐ»Ð½Ð¾ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¸Ñ€Ð°Ð½Ðµ** â€“ Ð´ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð½Ð° Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ð° Ñ Ð½Ð¸ÑˆÐºÐ¸ Ð¸ ÐºÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ‚Ð½Ð¾ÑÑ‚ Ð² Ð³Ñ€Ð°Ñ„Ð¸Ñ‡Ð½Ð¸ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ.  

> ðŸ§© ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸ÐµÑ‚Ð¾ Ð¸Ð·Ð¿Ð¾Ð»Ð·Ð²Ð° **Java Swing** Ð·Ð° Ð²Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¸ **Executor-Ð±Ð°Ð·Ð¸Ñ€Ð°Ð½Ð° Ð¿Ð°Ñ€Ð°Ð»ÐµÐ»Ð¸Ð·Ð°Ñ†Ð¸Ñ** Ð·Ð° ÑÐ¸Ð¼ÑƒÐ»Ð°Ñ†Ð¸Ð¾Ð½Ð½Ð¾Ñ‚Ð¾ ÑÐ´Ñ€Ð¾.

---

## ðŸ§  Ð—Ð°Ð´Ð°Ñ‡Ð°

Ð”Ð° ÑÐµ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¸Ñ€Ð° ÑÐ¸Ð¼ÑƒÐ»Ð°Ñ‚Ð¾Ñ€ Ð½Ð° Ñ‚Ñ€Ð°Ð½ÑÐ¿Ð¾Ñ€Ñ‚Ð½Ð° Ð¼Ñ€ÐµÐ¶Ð° (Ð¼ÐµÑ‚Ñ€Ð¾), Ð² ÐºÐ¾Ð¹Ñ‚Ð¾ Ð½ÑÐºÐ¾Ð»ÐºÐ¾ Ð¿Ñ€ÐµÐ²Ð¾Ð·Ð½Ð¸ ÑÑ€ÐµÐ´ÑÑ‚Ð²Ð° ÑÐµ Ð´Ð²Ð¸Ð¶Ð°Ñ‚ Ð¿Ð¾ Ð¿Ñ€ÐµÐ´Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»Ð½Ð¾ Ð·Ð°Ð´Ð°Ð´ÐµÐ½Ð¸ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¸.  

Ð’ÑÑÐºÐ¾ Ð¿Ñ€ÐµÐ²Ð¾Ð·Ð½Ð¾ ÑÑ€ÐµÐ´ÑÑ‚Ð²Ð¾:
- ÑÑ‚Ð°Ñ€Ñ‚Ð¸Ñ€Ð° Ð¾Ñ‚ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½ Ð²ÑŠÐ·ÐµÐ» (Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ);
- ÑÐµ Ð¿Ñ€Ð¸Ð´Ð²Ð¸Ð¶Ð²Ð° ÑÑ‚ÑŠÐ¿ÐºÐ° Ð¿Ð¾ ÑÑ‚ÑŠÐ¿ÐºÐ° ÐºÑŠÐ¼ ÐºÑ€Ð°Ð¹Ð½Ð°Ñ‚Ð° ÑÐ¸ Ñ‚Ð¾Ñ‡ÐºÐ°;
- Ð¿Ñ€Ð¸ Ð´Ð¾ÑÑ‚Ð¸Ð³Ð°Ð½Ðµ ÑÐ¿Ð¸Ñ€Ð° Ð·Ð° ÐºÑ€Ð°Ñ‚ÑŠÐº Ð¿Ñ€ÐµÑÑ‚Ð¾Ð¹ (â€ždwellâ€œ), ÑÐ»ÐµÐ´ ÐºÐ¾ÐµÑ‚Ð¾ Ð¾Ð±Ñ€ÑŠÑ‰Ð° Ð¿Ð¾ÑÐ¾ÐºÐ°Ñ‚Ð°;
- ÑÐµ Ð´Ð²Ð¸Ð¶Ð¸ **ÐµÐ´Ð½Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾** Ñ Ð¾ÑÑ‚Ð°Ð½Ð°Ð»Ð¸Ñ‚Ðµ Ð¿Ñ€ÐµÐ²Ð¾Ð·Ð½Ð¸ ÑÑ€ÐµÐ´ÑÑ‚Ð²Ð°.

Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð°Ñ‚Ð° Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð°:
- Ð¿Ð¾Ð´Ð´ÑŠÑ€Ð¶Ð° Ð²ÑŠÑ‚Ñ€ÐµÑˆÐµÐ½ **ÑÐ¸Ð¼ÑƒÐ»Ð°Ñ†Ð¸Ð¾Ð½ÐµÐ½ Ñ‡Ð°ÑÐ¾Ð²Ð½Ð¸Ðº**;
- Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐ²Ð° ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ‡Ñ€ÐµÐ· Ð±ÑƒÑ‚Ð¾Ð½Ð¸ **Start / Pause**;
- Ð°ÐºÑ‚ÑƒÐ°Ð»Ð¸Ð·Ð¸Ñ€Ð° Ð³Ñ€Ð°Ñ„Ð¸Ñ‡Ð½Ð¸Ñ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Ð² Ñ€ÐµÐ°Ð»Ð½Ð¾ Ð²Ñ€ÐµÐ¼Ðµ Ð±ÐµÐ· Ð´Ð° Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð° Event Dispatch Thread (EDT);
- Ð±ÑŠÐ´Ðµ **Ð»ÐµÑÐ½Ð¾ Ñ€Ð°Ð·ÑˆÐ¸Ñ€ÑÐµÐ¼Ð°** Ð·Ð° Ð½Ð¾Ð²Ð¸ Ñ‚ÐµÐ¼Ð¸, Ð°Ð»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼Ð¸ Ð·Ð° Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¸Ð·Ð¸Ñ€Ð°Ð½Ðµ Ð¸ ÑÑ†ÐµÐ½Ð°Ñ€Ð¸Ð¸.

---

## ðŸ§© ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð° Ð½Ð° ÑÐ¸ÑÑ‚ÐµÐ¼Ð°Ñ‚Ð°

| Ð¡Ð»Ð¾Ð¹ | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ |
|------|-----------|
| [**app/**](https://github.com/Alex-Tsvetanov/MetroSim/tree/main/src/main/java/metrosim/app) | Ð“Ð»Ð°Ð²Ð½Ð° Ñ‚Ð¾Ñ‡ÐºÐ° Ð½Ð° ÑÑ‚Ð°Ñ€Ñ‚Ð¸Ñ€Ð°Ð½Ðµ Ð¸ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ ([`Bootstrap.java`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/app/Bootstrap.java), [`MetroSimApp.java`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/app/MetroSimApp.java)). |
| [**ui/**](https://github.com/Alex-Tsvetanov/MetroSim/tree/main/src/main/java/metrosim/ui) | Ð“Ñ€Ð°Ñ„Ð¸Ñ‡ÐµÐ½ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ (Swing) â€“ [`MainWindow.java`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/ui/MainWindow.java), Ð¿Ð°Ð½ÐµÐ»Ð¸ Ð¸ Ð¼ÐµÐ´Ð¸Ð°Ñ‚Ð¾Ñ€. |
| [**domain/**](https://github.com/Alex-Tsvetanov/MetroSim/tree/main/src/main/java/metrosim/domain) | ÐžÑÐ½Ð¾Ð²Ð½Ð° ÑÐ¸Ð¼ÑƒÐ»Ð°Ñ†Ð¸Ð¾Ð½Ð½Ð° Ð»Ð¾Ð³Ð¸ÐºÐ° (ÑÐ²ÑÑ‚, Ð¿Ñ€ÐµÐ²Ð¾Ð·Ð½Ð¸ ÑÑ€ÐµÐ´ÑÑ‚Ð²Ð°, ÑÑŠÑÑ‚Ð¾ÑÐ½Ð¸Ñ, ÑÐ½Ð¸Ð¼ÐºÐ¸). |
| [**infrastructure/**](https://github.com/Alex-Tsvetanov/MetroSim/tree/main/src/main/java/metrosim/infrastructure) | ÐšÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ‚ÐµÐ½ Ð´Ð²Ð¸Ð³Ð°Ñ‚ÐµÐ» ([`SimulationEngine.java`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/infrastructure/SimulationEngine.java)) Ð¸ Ñ„Ð°ÑÐ°Ð´Ð° ([`SimulationFacade.java`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/infrastructure/SimulationFacade.java)). |
| [**services/**](https://github.com/Alex-Tsvetanov/MetroSim/tree/main/src/main/java/metrosim/services) | ÐÐ»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼Ð¸ Ð·Ð° Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¸Ð·Ð¸Ñ€Ð°Ð½Ðµ, Ð·Ð°Ñ€ÐµÐ¶Ð´Ð°Ð½Ðµ Ð½Ð° ÑÑ†ÐµÐ½Ð°Ñ€Ð¸Ð¸ Ð¸ Ð¿Ð»ÑŠÐ³Ð¸Ð½Ð¸. |
| [**metrics/**](https://github.com/Alex-Tsvetanov/MetroSim/tree/main/src/main/java/metrosim/metrics) | Ð›ÐµÐºÐ° ÑÐ¸ÑÑ‚ÐµÐ¼Ð° Ð·Ð° Ð¸Ð·Ð¼ÐµÑ€Ð²Ð°Ð½Ð¸Ñ Ð¸ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸ (Ð¸Ð·Ð¿Ð¾Ð»Ð·Ð²Ð°Ð½Ð° Ð¾Ñ‚ Ð´ÐµÐºÐ¾Ñ€Ð°Ñ‚Ð¾Ñ€Ð¸). |
| [**themes/**](https://github.com/Alex-Tsvetanov/MetroSim/tree/main/src/main/java/metrosim/themes) | Ð¢ÐµÐ¼Ð¸ Ð¸ Ñ†Ð²ÐµÑ‚Ð¾Ð²Ð¸ Ð¿Ð°ÐºÐµÑ‚Ð¸ (Default, Sofia) Ñ‡Ñ€ÐµÐ· Ð¿Ð»ÑŠÐ³Ð¸Ð½Ð¸. |
| [**events/**](https://github.com/Alex-Tsvetanov/MetroSim/tree/main/src/main/java/metrosim/events) | Ð¡ÑŠÐ±Ð¸Ñ‚Ð¸Ð¹Ð½Ð° ÑÐ¸ÑÑ‚ÐµÐ¼Ð° (Observer) Ð·Ð° Ð¾Ð±Ð½Ð¾Ð²ÑÐ²Ð°Ð½Ðµ Ð½Ð° Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð¸Ñ‚ÐµÐ»ÑÐºÐ¸Ñ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ. |

---

## âš™ï¸ Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»Ð½Ð¸ Ð¸Ð·Ð¸ÑÐºÐ²Ð°Ð½Ð¸Ñ

| ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ |
|------------|-----------|
| **ÐŸÐ¾Ñ‚Ñ€ÐµÐ±Ð¸Ñ‚ÐµÐ»ÑÐºÐ¸ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ** | Ð“Ð»Ð°Ð²ÐµÐ½ Ð¿Ñ€Ð¾Ð·Ð¾Ñ€ÐµÑ† Ñ Ð±ÑƒÑ‚Ð¾Ð½Ð¸ **Start / Pause**, ÐºÐ°Ñ€Ñ‚Ð°, Ð¿Ð°Ð½ÐµÐ» Ð·Ð° Ð¸Ð½ÑÐ¿ÐµÐºÑ†Ð¸Ñ Ð¸ Ð²Ñ€ÐµÐ¼ÐµÐ²Ð° Ð»Ð¸Ð½Ð¸Ñ. |
| **Ð¡Ð¸Ð¼ÑƒÐ»Ð°Ñ†Ð¸Ð¾Ð½Ð½Ð¾ ÑÐ´Ñ€Ð¾** | ÐŸÐ°Ñ€Ð°Ð»ÐµÐ»ÐµÐ½ Ð´Ð²Ð¸Ð³Ð°Ñ‚ÐµÐ», ÐºÐ¾Ð¹Ñ‚Ð¾ Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð° [`WorldSnapshot`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/domain/WorldSnapshot.java) Ð¸ Ð³Ð¾ Ð¿ÑƒÐ±Ð»Ð¸ÐºÑƒÐ²Ð° ÐºÑŠÐ¼ UI-Ñ‚Ð¾. |
| **ÐšÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ‚Ð½Ð¾ÑÑ‚** | ÐŸÐ°Ñ€Ð°Ð»ÐµÐ»Ð½Ð° Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð½Ð° Ð¿Ñ€ÐµÐ²Ð¾Ð·Ð½Ð¸ ÑÑ€ÐµÐ´ÑÑ‚Ð²Ð° Ñ‡Ñ€ÐµÐ· `ForkJoinPool`; ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð» Ð½Ð° Ð¸Ð·Ð¿ÑŠÐ»Ð½ÐµÐ½Ð¸ÐµÑ‚Ð¾ Ñ‡Ñ€ÐµÐ· `CancellationToken`. |
| **Ð Ð°Ð·ÑˆÐ¸Ñ€ÑÐµÐ¼Ð¾ÑÑ‚** | Ð—Ð°Ñ€ÐµÐ¶Ð´Ð°Ð½Ðµ Ð½Ð° Ð³Ñ€Ð°Ð´ÑÐºÐ¸ Ð¿Ð°ÐºÐµÑ‚Ð¸ Ñ‡Ñ€ÐµÐ· [Java ServiceLoader](https://docs.oracle.com/javase/8/docs/api/java/util/ServiceLoader.html). |
| **ÐœÐµÑ‚Ñ€Ð¸ÐºÐ¸** | Ð˜Ð·Ð¼ÐµÑ€Ð²Ð°Ð½Ðµ Ð½Ð° Ð²Ñ€ÐµÐ¼Ðµ Ð¸ Ð±Ñ€Ð¾Ð¹ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ñ‡Ñ€ÐµÐ· [`SimpleMetricsRegistry`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/metrics/SimpleMetricsRegistry.java). |

---

## ðŸ§© Ð˜Ð·Ð¿Ð¾Ð»Ð·Ð²Ð°Ð½Ð¸ ÑˆÐ°Ð±Ð»Ð¾Ð½Ð¸ Ð·Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¸Ñ€Ð°Ð½Ðµ (Design Patterns)

| ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ | Ð¨Ð°Ð±Ð»Ð¾Ð½ | Ð˜Ð¼Ð¿Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ |
|------------|---------|----------------|
| **Ð¡ÑŠÐ·Ð´Ð°Ð²Ð°Ñ‰Ð¸ (Creational)** | [**Abstract Factory**](https://en.wikipedia.org/wiki/Abstract_factory_pattern) | [`CityPackFactory`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/themes/CityPackFactory.java) â€“ Ñ„Ð°Ð±Ñ€Ð¸ÐºÐ° Ð·Ð° Ñ‚ÐµÐ¼Ð¸ Ð¸ Ñ†Ð²ÐµÑ‚Ð¾Ð²Ð¸ Ð¿Ð°Ð»Ð¸Ñ‚Ñ€Ð¸. |
|  | [**Builder**](https://en.wikipedia.org/wiki/Builder_pattern) | [`ScenarioBuilder`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/services/scenario/ScenarioBuilder.java) â€“ Ð¸Ð·Ð³Ñ€Ð°Ð¶Ð´Ð° ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ Ð½Ð° ÑÐ²ÐµÑ‚Ð°. |
| **Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð½Ð¸ (Structural)** | [**Facade**](https://en.wikipedia.org/wiki/Facade_pattern) | [`SimulationFacade`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/infrastructure/SimulationFacade.java) â€“ ÑÐºÑ€Ð¸Ð²Ð° ÑÐ»Ð¾Ð¶Ð½Ð¾ÑÑ‚Ñ‚Ð° Ð½Ð° Ð½Ð¸ÑˆÐºÐ¸ Ð¸ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ. |
|  | [**Decorator**](https://en.wikipedia.org/wiki/Decorator_pattern) | [`MeteredRouter`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/services/routing/MeteredRouter.java), [`LoggingRouter`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/services/routing/LoggingRouter.java). |
|  | [**Adapter**](https://en.wikipedia.org/wiki/Adapter_pattern) | [`ThirdPartyRouterAdapter`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/services/routing/ThirdPartyRouterAdapter.java) â€“ Ð°Ð´Ð°Ð¿Ñ‚Ð¸Ñ€Ð° Ð²ÑŠÐ½ÑˆÐ½Ð° Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð·Ð° Ð½Ð°Ð¼Ð¸Ñ€Ð°Ð½Ðµ Ð½Ð° Ð¿ÑŠÑ‚Ð¸Ñ‰Ð°. |
| **ÐŸÐ¾Ð²ÐµÐ´ÐµÐ½Ñ‡ÐµÑÐºÐ¸ (Behavioral)** | [**Observer**](https://en.wikipedia.org/wiki/Observer_pattern) | [`Subject`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/events/Subject.java) â€“ Ð¿ÑƒÐ±Ð»Ð¸ÐºÑƒÐ²Ð° ÑÐ½Ð¸Ð¼ÐºÐ¸ Ð½Ð° ÑÐ²ÐµÑ‚Ð° ÐºÑŠÐ¼ Ð¿Ð°Ð½ÐµÐ»Ð¸Ñ‚Ðµ. |
|  | [**State**](https://en.wikipedia.org/wiki/State_pattern) | [`Vehicle`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/domain/Vehicle.java) â€“ Ð¿Ñ€ÐµÐ¼Ð¸Ð½Ð°Ð²Ð° Ð¿Ñ€ÐµÐ· Idle â†’ EnRoute â†’ Dwell. |
|  | [**Strategy**](https://en.wikipedia.org/wiki/Strategy_pattern) | [`Router`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/services/routing/Router.java) â€“ Ð´ÐµÑ„Ð¸Ð½Ð¸Ñ€Ð° Ð²Ð·Ð°Ð¸Ð¼Ð¾Ð·Ð°Ð¼ÐµÐ½ÑÐµÐ¼Ð¸ Ð°Ð»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼Ð¸ Ð·Ð° Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¸Ð·Ð¸Ñ€Ð°Ð½Ðµ. |
|  | [**Command + Memento**](https://en.wikipedia.org/wiki/Command_pattern) | [`CommandStack`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/ui/commands/CommandStack.java) â€“ Ð¾ÑÐ¸Ð³ÑƒÑ€ÑÐ²Ð° undo/redo (Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð°Ð½Ð¾ Ð·Ð° Ð±ÑŠÐ´ÐµÑ‰Ð¸ Ð²ÐµÑ€ÑÐ¸Ð¸). |
|  | [**Mediator**](https://en.wikipedia.org/wiki/Mediator_pattern) | [`MainWindowMediator`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/ui/MainWindowMediator.java) â€“ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð¸Ñ€Ð° Ð²Ð·Ð°Ð¸Ð¼Ð¾Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸ÐµÑ‚Ð¾ Ð¼ÐµÐ¶Ð´Ñƒ Ð±ÑƒÑ‚Ð¾Ð½Ð¸Ñ‚Ðµ Ð¸ ÑÐ¸Ð¼ÑƒÐ»Ð°Ñ†Ð¸ÑÑ‚Ð°. |

---

## ðŸ§µ ÐœÐ¾Ð´ÐµÐ» Ð½Ð° ÐºÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ‚Ð½Ð¾ÑÑ‚

| ÐÐ¸ÑˆÐºÐ° | ÐžÑ‚Ð³Ð¾Ð²Ð¾Ñ€Ð½Ð¾ÑÑ‚ |
|--------|--------------|
| **EDT (Swing)** | Ð“Ñ€Ð°Ñ„Ð¸ÐºÐ° Ð¸ Ð²Ð·Ð°Ð¸Ð¼Ð¾Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ñ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð¸Ñ‚ÐµÐ»Ñ. |
| **Ð¡Ð¸Ð¼ÑƒÐ»Ð°Ñ†Ð¸Ð¾Ð½ÐµÐ½ Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ñ‡Ð¸Ðº** | Ð—Ð°Ð´ÐµÐ¹ÑÑ‚Ð²Ð° Ñ†Ð¸ÐºÑŠÐ»Ð° Ð½Ð° ÑÐ¸Ð¼ÑƒÐ»Ð°Ñ†Ð¸ÑÑ‚Ð° Ð½Ð° Ð²ÑÐµÐºÐ¸ Ð¸Ð½Ñ‚ÐµÑ€Ð²Ð°Ð». |
| **Ð Ð°Ð±Ð¾Ñ‚ÐµÐ½ Ð¿ÑƒÐ»** | Ð˜Ð·Ð¿ÑŠÐ»Ð½ÑÐ²Ð° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸ÑÑ‚Ð° Ð½Ð° Ð¿Ñ€ÐµÐ²Ð¾Ð·Ð½Ð¸Ñ‚Ðµ ÑÑ€ÐµÐ´ÑÑ‚Ð²Ð° Ð¿Ð°Ñ€Ð°Ð»ÐµÐ»Ð½Ð¾. |

[`SimulationEngine`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/infrastructure/SimulationEngine.java)  
[`SimulationFacade`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/infrastructure/SimulationFacade.java)

---

## ðŸ§® ÐœÐµÑ‚Ñ€Ð¸ÐºÐ¸ Ð¸ Ð¿Ð»ÑŠÐ³Ð¸Ð½Ð¸

- [`SimpleMetricsRegistry`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/metrics/SimpleMetricsRegistry.java) â€“ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€Ð° Ð±Ñ€Ð¾ÑÑ‡Ð¸ Ð¸ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð°.  
- Ð—Ð°Ñ€ÐµÐ¶Ð´Ð°Ð½Ðµ Ð½Ð° Ð¿Ð»ÑŠÐ³Ð¸Ð½Ð¸ Ñ‡Ñ€ÐµÐ· [`META-INF/services/metrosim.themes.CityPackFactory`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/resources/META-INF/services/metrosim.themes.CityPackFactory).  
- ÐŸÑ€Ð¸Ð¼ÐµÑ€ÐµÐ½ Ð¿Ð»ÑŠÐ³Ð¸Ð½: [`SofiaPackFactory`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/themes/SofiaPackFactory.java).

---

## ðŸ”„ ÐŸÐ¾Ñ‚Ð¾Ðº Ð½Ð° ÑÐ¸Ð¼ÑƒÐ»Ð°Ñ†Ð¸ÑÑ‚Ð°

1. **Start** â†’ Ð¸Ð·Ð²Ð¸ÐºÐ²Ð° `SimulationFacade.start()` Ð¸ ÑÑ‚Ð°Ñ€Ñ‚Ð¸Ñ€Ð° Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ñ‡Ð¸ÐºÐ°.  
2. **Engine tick** â†’ `SimulationEngine.step()` Ð¾Ð±Ð½Ð¾Ð²ÑÐ²Ð° Ð²ÑÐ¸Ñ‡ÐºÐ¸ Ð¿Ñ€ÐµÐ²Ð¾Ð·Ð½Ð¸ ÑÑ€ÐµÐ´ÑÑ‚Ð²Ð°.  
3. **Snapshot publish** â†’ Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð° ÑÐµ Ð½Ð¾Ð² `WorldSnapshot`, ÐºÐ¾Ð¹Ñ‚Ð¾ ÑÐµ Ð¿ÑƒÐ±Ð»Ð¸ÐºÑƒÐ²Ð° ÐºÑŠÐ¼ UI.  
4. **UI repaint** â†’ Ð¿Ð°Ð½ÐµÐ»Ð¸Ñ‚Ðµ Ð²Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð¸Ñ€Ð°Ñ‚ ÑÑŠÑÑ‚Ð¾ÑÐ½Ð¸ÐµÑ‚Ð¾ Ð°ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ð¾ Ð½Ð° EDT.  
5. **Pause** â†’ `CancellationToken` Ð¿Ñ€ÐµÐºÑŠÑÐ²Ð° ÑÐ¸Ð¼ÑƒÐ»Ð°Ñ†Ð¸ÑÑ‚Ð°.  
6. **Restart** â†’ Ñ‚Ð¾ÐºÐµÐ½ÑŠÑ‚ ÑÐµ Ñ€ÐµÑÐµÑ‚Ð¸Ñ€Ð° Ð¸ Ñ†Ð¸ÐºÑŠÐ»ÑŠÑ‚ Ð¿Ñ€Ð¾Ð´ÑŠÐ»Ð¶Ð°Ð²Ð°.

---

## ðŸ§ª ÐšÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¸ Ð·Ð° Ð¾Ñ†ÐµÐ½ÑÐ²Ð°Ð½Ðµ

| ÐšÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¹ | Ð¢ÐµÐ¶ÐµÑÑ‚ |
|-----------|--------|
| ÐšÐ¾Ñ€ÐµÐºÑ‚Ð½Ð¾ Ð¿Ñ€Ð¸Ð»Ð°Ð³Ð°Ð½Ðµ Ð½Ð° â‰¥6 GoF ÑˆÐ°Ð±Ð»Ð¾Ð½Ð° | 30% |
| ÐšÐ¾Ñ€ÐµÐºÑ‚Ð½Ð¾ÑÑ‚ Ð½Ð° ÐºÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ‚Ð½Ð¾ÑÑ‚Ñ‚Ð° Ð¸ Ñ€ÐµÐ°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ñ‚Ð° | 25% |
| ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð° Ð¸ Ñ‡ÐµÑ‚Ð¸Ð¼Ð¾ÑÑ‚ Ð½Ð° ÐºÐ¾Ð´Ð° | 20% |
| Ð Ð°Ð·ÑˆÐ¸Ñ€ÑÐµÐ¼Ð¾ÑÑ‚ (Ð¿Ð»ÑŠÐ³Ð¸Ð½Ð¸, Ñ‚ÐµÐ¼Ð¸, Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¸) | 15% |
| Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ Ð¸ Ð¾Ð±ÑÑÐ½ÐµÐ½Ð¸Ðµ Ð½Ð° ÑˆÐ°Ð±Ð»Ð¾Ð½Ð¸Ñ‚Ðµ | 10% |

---

## ðŸ§± Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ Ð·Ð° Ð¸Ð·Ð¿ÑŠÐ»Ð½ÐµÐ½Ð¸Ðµ

```bash
# ÐšÐ¾Ð¼Ð¿Ð¸Ð»Ð¸Ñ€Ð°Ð½Ðµ Ð¸ ÑÑ‚Ð°Ñ€Ñ‚Ð¸Ñ€Ð°Ð½Ðµ (Ð¸Ð·Ð¸ÑÐºÐ²Ð° JDK 17)
./gradlew run

# Ð¡Ñ‚Ð°Ñ€Ñ‚Ð¸Ñ€Ð°Ð½Ðµ Ñ Ð°Ð»Ñ‚ÐµÑ€Ð½Ð°Ñ‚Ð¸Ð²Ð½Ð° Ð³Ñ€Ð°Ð´ÑÐºÐ° Ñ‚ÐµÐ¼Ð°
./gradlew run -Dmetrosim.cityPack=sofia
```

# ðŸ§­ Project Task Description  
### MetroSim: Concurrent Transit Network Simulator (Swing, Java 17)

---

## ðŸŽ¯ Overview

**MetroSim** is a desktop **transit network simulator** that visualizes vehicles moving through a simplified metro or bus system.  
It demonstrates how **multiple GoF design patterns** can be combined in a **parallel, event-driven Swing application** to achieve scalability, modularity, and maintainability.

The project serves as a **reference implementation** for university courses in:

- **Design Patterns** â€“ showing how patterns interact in a cohesive architecture.  
- **Parallel Programming** â€“ demonstrating safe concurrency in GUI applications.  

> ðŸ§© The application uses **Java Swing** for the UI and **Executor-based concurrency** for the simulation core.

---

## ðŸ§  Problem Statement

Implement a simulator for a metro network where multiple vehicles move along virtual routes.  
Each vehicle:
- Starts at a specified node.
- Moves step-by-step toward its destination.
- Waits (â€œdwellsâ€) briefly upon arrival, then reverses direction.
- Operates concurrently with all other vehicles.

The system must:
- Continuously advance a **simulation clock**.
- Allow **Start** / **Pause** control of the simulation.
- Update the Swing UI in real time without blocking the Event Dispatch Thread.
- Maintain high extensibility for future features such as new cities, routers, or event visualizations.

---

## ðŸ§© Architecture Overview

| Layer | Description |
|-------|--------------|
| [**app/**](https://github.com/Alex-Tsvetanov/MetroSim/tree/main/src/main/java/metrosim/app) | Entry point and dependency composition ([`Bootstrap.java`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/app/Bootstrap.java), [`MetroSimApp.java`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/app/MetroSimApp.java)). |
| [**ui/**](https://github.com/Alex-Tsvetanov/MetroSim/tree/main/src/main/java/metrosim/ui) | Swing GUI components ([`MainWindow.java`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/ui/MainWindow.java)), panels, and mediator. |
| [**domain/**](https://github.com/Alex-Tsvetanov/MetroSim/tree/main/src/main/java/metrosim/domain) | Core simulation model (world, vehicles, states, snapshots). |
| [**infrastructure/**](https://github.com/Alex-Tsvetanov/MetroSim/tree/main/src/main/java/metrosim/infrastructure) | Concurrent engine ([`SimulationEngine.java`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/infrastructure/SimulationEngine.java)) and facade ([`SimulationFacade.java`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/infrastructure/SimulationFacade.java)). |
| [**services/**](https://github.com/Alex-Tsvetanov/MetroSim/tree/main/src/main/java/metrosim/services) | Routing, scenario loading, and plugins. |
| [**metrics/**](https://github.com/Alex-Tsvetanov/MetroSim/tree/main/src/main/java/metrosim/metrics) | Lightweight performance counters (Decorator target). |
| [**themes/**](https://github.com/Alex-Tsvetanov/MetroSim/tree/main/src/main/java/metrosim/themes) | Theme factories and plugin examples (Default, Sofia). |
| [**events/**](https://github.com/Alex-Tsvetanov/MetroSim/tree/main/src/main/java/metrosim/events) | Observer/event system for decoupled updates. |

---

## ðŸ§© Key Features

- **Real-time simulation** of vehicles and world clock.
- **Responsive Swing UI** â€” updates through immutable `WorldSnapshot`s.
- **Thread-safe parallelism** using `ForkJoinPool` and `ScheduledExecutorService`.
- **Extensible design** â€” new routers, cities, or metrics via plugins.
- **Command pattern scaffold** for future editing / undo-redo operations.

---

## âš™ï¸ Functional Requirements

| Category | Description |
|-----------|--------------|
| **User Interface** | Swing main window with Start / Pause controls, map, timeline, and inspector panels. |
| **Simulation Core** | Background engine advancing ticks and publishing [`WorldSnapshot`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/domain/WorldSnapshot.java). |
| **Concurrency** | Parallel vehicle updates using a work-stealing thread pool; cancellable execution tokens. |
| **Extensibility** | City themes discovered via [Java ServiceLoader](https://docs.oracle.com/javase/8/docs/api/java/util/ServiceLoader.html). |
| **Metrics** | Performance counters via [`SimpleMetricsRegistry`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/metrics/SimpleMetricsRegistry.java). |

---

## ðŸ§© Design Patterns Used

| Category | Pattern | Implementation |
|-----------|----------|----------------|
| **Creational** | [**Abstract Factory**](https://en.wikipedia.org/wiki/Abstract_factory_pattern) | [`CityPackFactory`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/themes/CityPackFactory.java) for visual themes (Default, Sofia). |
|  | [**Builder**](https://en.wikipedia.org/wiki/Builder_pattern) | [`ScenarioBuilder`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/services/scenario/ScenarioBuilder.java) constructs world configurations. |
| **Structural** | [**Facade**](https://en.wikipedia.org/wiki/Facade_pattern) | [`SimulationFacade`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/infrastructure/SimulationFacade.java) hides concurrency and scheduling logic. |
|  | [**Decorator**](https://en.wikipedia.org/wiki/Decorator_pattern) | [`MeteredRouter`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/services/routing/MeteredRouter.java), [`LoggingRouter`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/services/routing/LoggingRouter.java). |
|  | [**Adapter**](https://en.wikipedia.org/wiki/Adapter_pattern) | [`ThirdPartyRouterAdapter`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/services/routing/ThirdPartyRouterAdapter.java) wraps an incompatible pathfinding API. |
| **Behavioral** | [**Observer**](https://en.wikipedia.org/wiki/Observer_pattern) | [`Subject`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/events/Subject.java) publishes snapshots to UI observers. |
|  | [**State**](https://en.wikipedia.org/wiki/State_pattern) | [`Vehicle`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/domain/Vehicle.java) transitions between Idle â†’ EnRoute â†’ Dwell. |
|  | [**Strategy**](https://en.wikipedia.org/wiki/Strategy_pattern) | [`Router`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/services/routing/Router.java) defines pluggable routing strategies. |
|  | [**Command + Memento**](https://en.wikipedia.org/wiki/Command_pattern) | [`CommandStack`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/ui/commands/CommandStack.java) enables undo/redo (future editor). |
|  | [**Mediator**](https://en.wikipedia.org/wiki/Mediator_pattern) | [`MainWindowMediator`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/ui/MainWindowMediator.java) coordinates button actions. |

---

## ðŸ§µ Concurrency Model

| Thread | Responsibility |
|--------|----------------|
| **EDT (Swing)** | Handles rendering and user interaction. |
| **Simulation Scheduler** | Periodically triggers simulation ticks. |
| **Worker Pool** | Executes per-vehicle updates and routing in parallel. |

> Snapshots are immutable, ensuring **no data races** between simulation threads and the Swing Event Dispatch Thread.

[`SimulationEngine`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/infrastructure/SimulationEngine.java)  
[`SimulationFacade`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/infrastructure/SimulationFacade.java)

---

## ðŸ§® Metrics and Plugins

- [`SimpleMetricsRegistry`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/metrics/SimpleMetricsRegistry.java) tracks counters and durations.  
- Plugins discovered via [`META-INF/services/metrosim.themes.CityPackFactory`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/resources/META-INF/services/metrosim.themes.CityPackFactory).  
- Example plugin: [`SofiaPackFactory`](https://github.com/Alex-Tsvetanov/MetroSim/blob/main/src/main/java/metrosim/themes/SofiaPackFactory.java).

---

## ðŸ§© Simulation Flow

1. **Start** â†’ `SimulationFacade.start()` schedules periodic ticks.  
2. **Engine tick** â†’ `SimulationEngine.step()` updates each `Vehicle` concurrently.  
3. **Snapshot publish** â†’ New `WorldSnapshot` broadcast via `Subject`.  
4. **UI repaint** â†’ Panels render snapshot asynchronously on EDT.  
5. **Pause** â†’ `CancellationToken` cooperatively stops tasks.  
6. **Restart** â†’ Token resets; scheduler resumes (safe resume after pause).

---

## ðŸ§ª Evaluation Criteria

| Aspect | Weight |
|--------|--------|
| Correct application of â‰¥6 GoF patterns | 30% |
| Concurrency correctness & responsiveness | 25% |
| Clean architecture & code organization | 20% |
| Extensibility (plugins, routers, cities) | 15% |
| Documentation and clarity | 10% |

---

## ðŸ§± Run Instructions

```bash
# Build and run (requires JDK 17)
./gradlew run

# Run with alternative city pack
./gradlew run -Dmetrosim.cityPack=sofia
```